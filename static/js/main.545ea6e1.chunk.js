(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{15:function(e,t,c){},18:function(e,t,c){},19:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(8),s=c.n(i),r=(c(15),c(9)),l=c(5),o=c.n(l),d=c(10),u=c(7),j=c(2),b=c(0),m=function(){return Object(b.jsx)("div",{className:"header margin-bottom",children:"Weather App"})},h=function(e){var t=e.cityInput,c=e.setCityInput,n=e.tryNewCity,a=e.cityNotFound,i=e.setCityNotFound,s=e.setUnits,r=function(e){s(e)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"input-group mb-3 w-75 p-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"\u8acb\u8f38\u5165\u57ce\u5e02\u540d\u7a31","aria-label":"City Name","aria-describedby":"button-addon2",value:t,onChange:function(e){c(e.target.value.trim()),i(!1)}}),Object(b.jsx)("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:n,children:"Get Weather"})]}),Object(b.jsxs)("div",{className:"margin-bottom",children:[Object(b.jsx)("span",{children:"\u8acb\u9078\u64c7\u6eab\u5ea6\u55ae\u4f4d"}),Object(b.jsxs)("div",{className:"form-check",onChange:function(e){return r("metric")},children:[Object(b.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",defaultChecked:!0}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"flexRadioDefault1",children:"\u651d\u6c0f\u5ea6\uff08\xb0C\uff09"})]}),Object(b.jsxs)("div",{className:"form-check",onChange:function(e){return r("Imperial")},children:[Object(b.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2"}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"flexRadioDefault2",children:"\u83ef\u6c0f\u5ea6\uff08\xb0F\uff09"})]})]}),Object(b.jsx)("div",{className:"margin-bottom",children:a?Object(b.jsx)("div",{className:"alert alert-danger",role:"alert",children:"\u627e\u4e0d\u5230\u8a72\u57ce\u5e02"}):""})]})},p=function(e){var t=e.weatherData,c=e.setCity;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"container border-bottom",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col",children:"\u57ce\u5e02"}),Object(b.jsx)("div",{className:"col",children:"\u5929\u6c23\u72c0\u6cc1"}),Object(b.jsx)("div",{className:"col",children:"\u7576\u524d\u6eab\u5ea6"}),Object(b.jsx)("div",{className:"col",children:"\u6700\u9ad8\u6eab\u5ea6"}),Object(b.jsx)("div",{className:"col",children:"\u6700\u4f4e\u6eab\u5ea6"}),Object(b.jsx)("div",{className:"col",children:"\u6fd5\u5ea6"}),Object(b.jsx)("div",{className:"col",children:"\u522a\u9664"})]})}),Object(b.jsx)("div",{className:"margin-bottom",children:function(){var e=[];if(t){for(var n=t.length-1;n>=0;n--)e.push({cityName:t[n].name,temp:t[n].main.temp,humidity:t[n].main.humidity,tempMax:t[n].main.temp_max,tempMin:t[n].main.temp_min,description:t[n].weather[0].description});return e.map((function(e,t){return Object(b.jsx)("div",{className:"container border-bottom",children:Object(b.jsxs)("div",{className:"row line-height",children:[Object(b.jsx)("div",{className:"col",children:e.cityName}),Object(b.jsx)("div",{className:"col",children:e.description}),Object(b.jsx)("div",{className:"col",children:e.temp}),Object(b.jsx)("div",{className:"col",children:e.tempMax}),Object(b.jsx)("div",{className:"col",children:e.tempMin}),Object(b.jsxs)("div",{className:"col",children:[e.humidity,"%"]}),Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("button",{className:"delete-btn",onClick:function(){return function(e){var t=e.toUpperCase();c((function(e){return e.filter((function(e){return e!==t}))}))}(e.cityName)},children:"Delete"})})]})},t)}))}return Object(b.jsx)("div",{})}()})]})},f=function(e){var t=e.loading,c=e.fetchData,n=e.setCity;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",className:"btn btn btn-outline-dark",onClick:c,children:"\u91cd\u65b0\u6574\u7406"}),Object(b.jsx)("button",{type:"button",className:"btn btn btn-outline-dark margin-left",onClick:function(){n([])},children:"\u5168\u90e8\u522a\u9664"}),Object(b.jsx)("div",{className:"inline margin-left",children:t?Object(b.jsx)("div",{className:"spinner-border text-dark",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):"Done !"})]})};c(18);var x=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(""),s=Object(j.a)(i,2),l=s[0],x=s[1],O=Object(n.useState)(),v=Object(j.a)(O,2),N=v[0],y=v[1],g=Object(n.useState)(localStorage.getItem("cityList")?localStorage.getItem("cityList").split(","):[]),C=Object(j.a)(g,2),k=C[0],w=C[1],F=Object(n.useState)([]),D=Object(j.a)(F,2),S=D[0],I=D[1],L=Object(n.useState)("Metric"),M=Object(j.a)(L,2),R=M[0],U=M[1],_="ddc25a8b210ab01bba26befd30c70b9d",q="zh_tw",B=function(){var e=Object(u.a)(o.a.mark((function e(){var t,c,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.abrupt("return");case 4:return a(!0),e.next=7,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(l,"&units=").concat(R,"&lang=").concat(q,"&appid=").concat(_));case 7:return t=e.sent,e.next=10,t.json();case 10:"404"===(c=e.sent).cod?y(!0):(y(!1),n=c.name.toUpperCase(),k.includes(n)?((i=k.filter((function(e){return e!==n}))).push(n),w(i)):w((function(e){return[].concat(Object(d.a)(e),[n])}))),x(""),a(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(n.useCallback)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,c,n,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),t=[],c=Object(r.a)(k),e.prev=3,c.s();case 5:if((n=c.n()).done){e.next=16;break}return i=n.value,e.next=9,fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(i,"&units=").concat(R,"&lang=").concat(q,"&appid=").concat(_));case 9:return s=e.sent,e.next=12,s.json();case 12:l=e.sent,t.push(l);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:I(t),a(!1);case 26:case"end":return e.stop()}}),e,null,[[3,18,21,24]])})));return function(){return e.apply(this,arguments)}})()()}),[_,k,q,R]);return Object(n.useEffect)((function(){E(),localStorage.setItem("cityList",k)}),[E,k]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(m,{}),Object(b.jsx)(h,{cityInput:l,tryNewCity:B,cityNotFound:N,setCityInput:x,setUnits:U,setCityNotFound:y}),Object(b.jsx)(p,{weatherData:S,setCity:w}),Object(b.jsx)(f,{loading:c,fetchData:E,setCity:w})]})})},O=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,20)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),i(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),O()}},[[19,1,2]]]);
//# sourceMappingURL=main.545ea6e1.chunk.js.map